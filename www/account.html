<!-- Adding in required libraries -->
<script src="cordova.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.9-1/crypto-js.min.js"></script>
<script src="assets/js/pkce.js"></script>
<script src="assets/js/general.js"></script>
<script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
<!DOCTYPE HTML>
<html>
	<head>
		<link rel="icon" type="image/png" href="images/icon.png" />
		<title>Atko inc :: webshop</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<!-- end libraries -->
		<style>
			.cnt_homeBanner {
				display: none;
			}
		</style>
	</head>
	<body class="is-preload homepage">
		<div id="page-wrapper">
			<!-- Header -->
				<div id="header-wrapper">
					<header id="header" class="container">

						<!-- Logo -->
							<div id="logo">
								<h1><a href="index.html">Atko shop v2</a></h1>
								<span>by Okta inc</span>
							</div>

						<!-- Nav -->
							<nav id="nav">
								<ul>
									<li class=""><a href="index.html">Home</a></li>
									<li class="current"><a id="btn_profile_menu" class="lnk_logout" href="account.html">Profile</a></li>
									<li><a id="btn_logout_menu" class="lnk_logout" href="logout.html">Logout</a></li>
								</ul>
							</nav>

					</header>
				</div>

			<!-- Banner -->
				<div id="banner-wrapper">
					<div id="banner" class="box container">
						<!-- Start Message content -->
						<div id="" class="row">
							<div class="col-7 col-12-medium messageLine">
								<h4 id="lbl_message"></h4>
							</div>
						</div>
						<!-- End Message content -->
						<!-- Start Banner for authenticated user -->
						<div id="cnt_Auth" class="row cnt_homeBanner">
							<div class="col-7 col-12-medium">
								<h2>Welcome <span class="lbl_displayName">[name]</span></h2>
								<p>This is all we have on you</p>
							</div>
							<div class="col-5 col-12-medium">
								<ul>
									<li><a id="btn_getfullaccess" href="#" class="button large icon solid fa-star">Load data</a></li>
									<li><a id="btn_tokens" href="#" class="button alt large icon solid fa-arrow-circle-down lnk_tokens">Tokens</a></li>
								</ul>
							</div>
						</div>
						<!-- End Banner for authenticated user -->
					</div>
				</div>

			<!-- Features -->
				<div id="features-wrapper" class="cnt_tokens" style="display:none;">
					<div class="container">
						<div class="row">
							<div class="col-6 col-12-medium">

								<!-- Box -->
									<section class="box feature">
										<div class="inner">
											<header>
												<h2>Access token</h2> 
												<p>This toke is valid for <span id="lbl_accesstoken_exp"></span>, more information here: <a id="lnk_accesstoken_inspect" target="_blank" href="#">token.dev</a></p>
											</header>
											<p>
												<pre id="lbl_accesstoken" class="token"> 
												</pre>
											</p>
											<header>
												<h2>Refresh token</h2> 
												<p>
													This is your one-time refresh token: <span id="lbl_refreshtoken"></span><br><br>
													<a href="#" class="button icon solid fa-star btn_renewtokens">Refresh now</a>
												</p>
											</header>
										</div>
									</section>

							</div>
							<div class="col-6 col-12-medium">

								<!-- Box -->
									<section class="box feature">
										<div class="inner">
											<header>
												<h2>ID token</h2>
												<p>valid for <span id="lbl_idtoken_exp"></span>, more information here: <a id="lnk_idtoken_inspect" target="_blank" href="#">token.dev</a></p>
											</header> </p>
											</header>
											<p>
												<pre id="lbl_idtoken" class="token"> 
												</pre>
											</p>
										</div>
									</section>

							</div>
						</div>
					</div>
				</div>

			<!-- Features -->
				<div id="features-wrapper" class="cnt_profile">
					<div class="container">
						<div class="row">
							<div class="col-6 col-12-medium">

								<!-- Box -->
									<section class="box feature">
										<div class="inner">
											<header>
												<h2>Account</h2> 
												<strong>first name</strong><br>
												<input id="inp_firstname" type="text" disabled class="dataValue blocked" value=""/><br>
												<strong>last name</strong><br>
												<input id="inp_lastname" type="text" disabled class="dataValue blocked" value=""/><br>
												<strong>phone number</strong><br>
												<input id="inp_phone" type="text" disabled class="dataValue blocked" value=""/><br>
											</header>
										</div>
									</section>

							</div>
							<div class="col-6 col-12-medium">

								<!-- Box -->
									<section class="box feature">
										<div class="inner">
											<header>
												<h2>Address</h2> 
												<strong>street</strong><br>
												<input id="inp_street" type="text" disabled class="dataValue blocked" value=""/><br>
												<strong>postal code</strong><br>
												<input id="inp_postalcode" type="text" disabled class="dataValue blocked" value=""/><br>
												<strong>city</strong><br>
												<input id="inp_city" type="text" disabled class="dataValue blocked" value=""/><br>
												<strong>country</strong><br>
												<input id="inp_country" type="text" disabled class="dataValue blocked" value=""/><br>
											</header>
										</div>
									</section>

							</div>
						</div>

					</div>
				</div>

			<!-- Footer -->
				<div id="footer-wrapper">
					<footer id="footer" class="container">
						<div class="row">
							<div class="col-3 col-6-medium col-12-small">

								<!-- Links -->
									<section class="widget links">
										<h3>Random link</h3>
										<ul class="style2">
											<li><a href="#">Etiam feugiat condimentum</a></li>
											<li><a href="#">Aliquam imperdiet suscipit odio</a></li>
											<li><a href="#">Sed porttitor cras in erat nec</a></li>
											<li><a href="#">Felis varius pellentesque potenti</a></li>
											<li><a href="#">Nullam scelerisque blandit leo</a></li>
										</ul>
									</section>

							</div>
							<div class="col-3 col-6-medium col-12-small">

								<!-- Links -->
									<section class="widget links">
										<h3>More Stuff</h3>
										<ul class="style2">
											<li><a href="#">Etiam feugiat condimentum</a></li>
											<li><a href="#">Aliquam imperdiet suscipit odio</a></li>
											<li><a href="#">Sed porttitor cras in erat nec</a></li>
											<li><a href="#">Felis varius pellentesque potenti</a></li>
											<li><a href="#">Nullam scelerisque blandit leo</a></li>
										</ul>
									</section>

							</div>
							<div class="col-3 col-6-medium col-12-small">

								<!-- Links -->
									<section class="widget links">
										<h3>And also ...</h3>
										<ul class="style2">
											<li><a href="#">Etiam feugiat condimentum</a></li>
											<li><a href="#">Aliquam imperdiet suscipit odio</a></li>
											<li><a href="#">Sed porttitor cras in erat nec</a></li>
											<li><a href="#">Felis varius pellentesque potenti</a></li>
											<li><a href="#">Nullam scelerisque blandit leo</a></li>
										</ul>
									</section>

							</div>
							<div class="col-3 col-6-medium col-12-small">

								<!-- Contact -->
									<section class="widget contact last">
										<h3>Contact Us</h3>
										<ul>
											<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
											<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
											<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
											<li><a href="#" class="icon brands fa-dribbble"><span class="label">Dribbble</span></a></li>
											<li><a href="#" class="icon brands fa-pinterest"><span class="label">Pinterest</span></a></li>
										</ul>
										<p><a target="_blank" href="http://stackoverflow.com">555 Fake Address<br />
										Someville, XX 00000<br />
										(555) 999-0000</a></p>
									</section>

							</div>
						</div>
					</footer>
				</div>

			</div>

		<!-- Scripts -->

			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
    <script>


    </script>
<script>
	// Execute when document is ready
	$(document).ready(function(){
        writeLog('-> document is ready');
		checkAuthentionStatus()

	})

	// Execute when tokens is clicked
	$(".lnk_tokens").click(function() {
		writeLog('-> display tokens div');
		$(".cnt_tokens").slideToggle();

		if ($("#btn_tokens").hasClass('fa-arrow-circle-up')===true) {
			$("#btn_tokens").removeClass('fa-arrow-circle-up');
			$("#btn_tokens").addClass('fa-arrow-circle-down');
		} else {
			$("#btn_tokens").removeClass('fa-arrow-circle-down');
			$("#btn_tokens").addClass('fa-arrow-circle-up');

		}
	})

	$(".btn_renewtokens").click(function() {
		var refresh_token = $("#lbl_refreshtoken").text();
		renewTokens(refresh_token);
	})    

	$("#btn_getfullaccess").click(function(){
		var codeVerifier 		= generateCodeVerifier();
		var codeChallenge 		= generateCodeChallenge(codeVerifier);
		var requestedScopes 	= 'openid profile access_full'
		var redirectUri 		= localStorage.getItem('portalrenewurl')
		localStorage.setItem('codeverifier', codeVerifier);
		getAuthorisationCode(codeChallenge, requestedScopes, redirectUri);

	})

	// catch the event when a token is requested for full access
	document.addEventListener("deviceready", function () {
	    universalLinks.subscribe('ul_fullaccess', function (eventData) {
			var redirectUri 		= localStorage.getItem('portalrenewurl')
			var requestedScopes 	= 'openid profile access_full'
			var authorisationCode = getParameterFromString(eventData.url, 'code');
	        getTokensWithCode(authorisationCode, requestedScopes, redirectUri);
	    });
	});


    </script>
















